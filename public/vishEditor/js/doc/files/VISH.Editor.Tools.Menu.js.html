<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>VISH.Editor.Tools.Menu.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0pr2&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0pr2&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/VISH.Editor.html">VISH.Editor</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/ViSH.html">ViSH</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: VISH.Editor.Tools.Menu.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
VISH.Editor.Tools.Menu = (function(V,$,undefined){

	var _initialized = false;
	var _hoverMenu = false;

	&#x2F;*
	 * Init singleton
	 * Perform actions that must be executed only once
	 *&#x2F;
	var init = function(){
		if(!_initialized){
			if(!V.Status.getDevice().desktop){
				if(V.Status.getDevice().tablet){
					V.Editor.MenuTablet.init();
				} else {
					disableMenu();
					return;
				}
			} else {
				_hoverMenu = true;
			}

			&#x2F;&#x2F;Add listeners to menu buttons
			$.each($(&quot;#menu a.menu_action&quot;), function(index, menuButton) {
				$(menuButton).on(&quot;click&quot;, function(event){
					event.preventDefault();
					if($(menuButton).parent().hasClass(&quot;menu_item_disabled&quot;)){
						&#x2F;&#x2F;Disabled button
						return;
					}
					if(typeof V.Editor.Tools.Menu[$(menuButton).attr(&quot;action&quot;)] == &quot;function&quot;){
						V.Editor.Tools.Menu[$(menuButton).attr(&quot;action&quot;)](this);
						_hideMenuAfterAction();
					}
				});
			});

			_initialized = true;
		}
		$(&quot;#menu&quot;).show();
	}

	var _enableMenuItem = function(items){
		&#x2F;&#x2F; $(items).show();
		$(items).removeClass(&quot;menu_item_disabled&quot;).addClass(&quot;menu_item_enabled&quot;);
	}

	var _disableMenuItem = function(items){
		&#x2F;&#x2F; $(items).hide();
		$(items).removeClass(&quot;menu_item_enabled&quot;).addClass(&quot;menu_item_disabled&quot;);
	}

	var disableMenu = function(){
		$(&quot;#menu&quot;).hide();
		$(&quot;#menu&quot;).attr(&quot;id&quot;,&quot;menuDisabled&quot;);
	}

	var enableMenu = function(){
		$(&quot;#menuDisabled&quot;).show();
		$(&quot;#menuDisabled&quot;).attr(&quot;id&quot;,&quot;menu&quot;);
	}


	&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;
	&#x2F;&#x2F;&#x2F; SAVE
	&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;

	var onSaveButtonClicked = function(){
		onPublishButtonClicked();
	}

	&#x2F;**
	* function called when user clicks on save
	* Generates the json for the current slides
	* covers the section element and every article inside
	* finally calls V.Viewer with the generated json
	*&#x2F;
	var onPublishButtonClicked = function(){

		if(!V.Editor.Settings.checkMandatoryFields()){
			var options = {};
			options.width = 600;
			options.height = 220;
			options.text = V.I18n.getTrans(&quot;i.MandatoryFieldsNotification&quot;);
			var button1 = {};
			button1.text = V.I18n.getTrans(&quot;i.GotoSettings&quot;);
			button1.callback = function(){
				V.Editor.Settings.displaySettings();
			}
			options.buttons = [button1];
			&#x2F;&#x2F; options.onClosedCallback = function(){
			&#x2F;&#x2F; };
			V.Utils.showDialog(options);
			return;
		}

		if(V.Slides.getSlides().length === 0){
			var options = {};
			options.width = 600;
			options.height = 150;
			options.text = V.I18n.getTrans(&quot;i.NoSlidesOnSaveNotification&quot;);
			var button1 = {};
			button1.text = V.I18n.getTrans(&quot;i.Ok&quot;);
			button1.callback = function(){
				$.fancybox.close();
			}
			options.buttons = [button1];
			V.Utils.showDialog(options);
			return;
		}

		var options = {};
		options.width = 400;
		options.height = 140;
		options.notificationIconSrc = V.ImagesPath + &quot;toolbar&#x2F;save_document.png&quot;;
		options.text = V.I18n.getTrans(&quot;i.areyousureNotification&quot;);
		options.buttons = [];

		var button1 = {};
		button1.text = V.I18n.getTrans(&quot;i.cancel&quot;);
		button1.callback = function(){
			$.fancybox.close();
		}
		options.buttons.push(button1);

		if(((V.Configuration.getConfiguration()[&quot;mode&quot;]==V.Constant.VISH)&amp;&amp;(V.Editor.isPresentationDraft()))||(V.Configuration.getConfiguration()[&quot;mode&quot;]==V.Constant.NOSERVER)){
			var button2 = {};
			button2.text = V.I18n.getTrans(&quot;i.draft&quot;);
			button2.callback = function(){
				var presentation = V.Editor.savePresentation();
				V.Editor.afterSavePresentation(presentation,&quot;draft&quot;);
				$.fancybox.close();
			}
			options.buttons.push(button2);
		}

		var button3 = {};
		if((V.Configuration.getConfiguration()[&quot;mode&quot;]==V.Constant.VISH)||(V.Configuration.getConfiguration()[&quot;mode&quot;]==V.Constant.NOSERVER)){
			button3.text = V.I18n.getTrans(&quot;i.publish&quot;);
		} else if(V.Configuration.getConfiguration()[&quot;mode&quot;]==V.Constant.STANDALONE){
			button3.text = V.I18n.getTrans(&quot;i.save&quot;);
		}
		button3.callback = function(){
			var presentation = V.Editor.savePresentation();
			V.Editor.afterSavePresentation(presentation,&quot;publish&quot;);
			$.fancybox.close();
		}
		options.buttons.push(button3);

		V.Utils.showDialog(options);
	};

	&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;
	&#x2F;&#x2F;&#x2F; PREVIEW
	&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;

	var preview = function(){
		V.Editor.Preview.preview();
	}

	&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;
	&#x2F;&#x2F;&#x2F; HELP
	&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;

	var help = function(){
		$(&quot;#help_right&quot;).trigger(&#x27;click&#x27;);
	}

	&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;
	&#x2F;&#x2F;More Actions
	&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;

	var insertSmartcard = function(){
		$(&quot;#addSlideFancybox&quot;).trigger(&#x27;click&#x27;);
		V.Editor.Utils.loadTab(&#x27;tab_smartcards_repo&#x27;);
	};

	var insertPresentation = function(){
		$(&quot;#addSlideFancybox&quot;).trigger(&#x27;click&#x27;);
		V.Editor.Utils.loadTab(&#x27;tab_presentations_repo&#x27;);
	};

	var insertSlide = function(){
		$(&quot;#addSlideFancybox&quot;).trigger(&#x27;click&#x27;);
		V.Editor.Utils.loadTab(&#x27;tab_slides&#x27;);
	};

	var insertSubslide = function(){
		V.Editor.setContentAddMode(V.Constant.SLIDESET);
		$(&quot;#addSlideFancybox&quot;).trigger(&#x27;click&#x27;);
		V.Editor.Utils.loadTab(&#x27;tab_slides&#x27;);
	};

	var insertJSON = function(){
		$(&quot;#addSlideFancybox&quot;).trigger(&#x27;click&#x27;);
		V.Editor.Utils.loadTab(&#x27;tab_json_file&#x27;);
	};

	var insertPDFex = function(){
		$(&quot;#addSlideFancybox&quot;).trigger(&#x27;click&#x27;);
		V.Editor.Utils.loadTab(&#x27;tab_pdfex&#x27;);
	};

	var exportToJSON = function(){
		V.Utils.Loader.startLoading();
		V.Editor.Presentation.File.exportToJSON(function(){
			&#x2F;&#x2F;on success
			V.Utils.Loader.stopLoading();
		}, function(){
			setTimeout(function(){
				V.Utils.Loader.onCloseLoading();
				var options = {};
				options.width = 600;
				options.height = 185;
				options.text = V.I18n.getTrans(&quot;i.exportPresToJSONerrorNotification&quot;);
				var button1 = {};
				button1.text = V.I18n.getTrans(&quot;i.Ok&quot;);
				button1.callback = function(){
					$.fancybox.close();
				}
				options.buttons = [button1];
				V.Utils.showDialog(options);
			},500);
		});
	};

	var displaySettings = function(){
		V.Editor.Settings.displaySettings();
	}

	var _hideMenuAfterAction = function(){
		if(_hoverMenu){
			$(&quot;#menu&quot;).hide();
			setTimeout(function(){
				$(&quot;#menu&quot;).show();
			},50);
		}
	}

	return {
		init							: init,
		disableMenu 					: disableMenu,
		enableMenu 						: enableMenu,
		insertPresentation				: insertPresentation,
		insertSmartcard					: insertSmartcard,
		insertSlide						: insertSlide,
		insertSubslide					: insertSubslide,
		insertJSON						: insertJSON,
		insertPDFex						: insertPDFex,
		exportToJSON 					: exportToJSON,
		displaySettings					: displaySettings,
		onPublishButtonClicked			: onPublishButtonClicked,
		onSaveButtonClicked 			: onSaveButtonClicked,
		preview 						: preview,
		help 							: help
	};

}) (VISH, jQuery);
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
